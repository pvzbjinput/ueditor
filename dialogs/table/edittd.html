<!DOCTYPE html>
<html>

<head>
    <title></title>
    <script type="text/javascript" src="../internal.js"></script>
    <style type="text/css">
        .section {
            text-align: center;
            margin-top: 10px;
        }
        
        .section input {
            margin-left: 5px;
            width: 70px;
        }
    </style>
</head>

<body>
    <div class="section" style="display: none">
        <span><var id="lang_tdBkColor"></var></span>
        <input type="text" id="J_tone" />
    </div>
    <div class="section">
        <span>宽度：</span>
        <input type="text" id="J_width" />px
    </div>
    <div class="section">
        <span>高度：</span>
        <input type="text" id="J_height" />px
    </div>
    <div class="section">
        <span>隐藏边框：</span>
        <input type="checkbox" id="J_border" />
    </div>
    <script type="text/javascript">
        var tone = $G("J_tone"),
            colorPiker = new UE.ui.ColorPicker({
                editor: editor
            }),
            colorPop = new UE.ui.Popup({
                editor: editor,
                content: colorPiker
            }),
            jWidth = $G("J_width"),
            jHeight = $G("J_height");
        jBorder = $G("J_border");

        domUtils.on(tone, "click", function() {
            colorPop.showAnchor(tone);
        });
        domUtils.on(document, 'mousedown', function() {
            colorPop.hide();
        });
        colorPiker.addListener("pickcolor", function() {
            tone.value = arguments[1];
            colorPop.hide();
        });
        colorPiker.addListener("picknocolor", function() {
            tone.value = "";
            colorPop.hide();
        });
        dialog.onok = function() {
            editor.execCommand("edittd", tone.value, jWidth.value, jHeight.value, jBorder.checked);
        };

        var start = editor.selection.getStart(),
            cell = start && domUtils.findParentByTagName(start, ["td", "th"], true);
        if (cell) {
            var color = domUtils.getComputedStyle(cell, 'background-color');
            if (/^#/.test(color)) {
                tone.value = color
            }
            var width = cell.style.width;
            if (width) {
                jWidth.value = parseInt(width);
            }
            var height = cell.style.height;
            if (height) {
                jHeight.value = parseInt(height);
            }
            var borderWidth = domUtils.hasClass(cell, 'td-noborder');
            if (borderWidth) {
                jBorder.checked = true;
            } else {
                jBorder.checked = false;
            }

        }
    </script>
</body>

</html>